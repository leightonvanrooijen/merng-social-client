{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/leighton/Documents/VScode/merngSocialSite/merng-client/src/components/DeleteButton.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { gql, useMutation } from \"@apollo/client\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { FETCH_POSTS_QUERY } from \"../utils/graphql\";\nconst useStyles = makeStyles(theme => ({\n  deleteIcon: {\n    marginLeft: \"auto\"\n  }\n}));\nexport default function DeleteButton({\n  postId,\n  commentId,\n  callback\n}) {\n  _s();\n\n  const classes = useStyles();\n  const [confirmOpen, setConfirmOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setConfirmOpen(true);\n  };\n\n  const handleClose = () => {\n    setConfirmOpen(false);\n  };\n\n  const mutation = commentId ? DELETE_COMMENT_MUTATION : DELETE_POST_MUTATION;\n  const [deletePostOrMutation] = useMutation(mutation, {\n    update(proxy) {\n      setConfirmOpen(false);\n\n      if (!commentId) {\n        let data = proxy.readQuery({\n          query: FETCH_POSTS_QUERY\n        }); // data = data.getPosts.filter((p) => p.id !== postId);\n\n        proxy.writeQuery({\n          query: FETCH_POSTS_QUERY,\n          data: {\n            getPosts: data.getPosts.filter(p => p.id !== postId)\n          }\n        });\n      }\n\n      if (callback) callback();\n    },\n\n    variables: {\n      postId,\n      commentId\n    }\n  });\n\n  const confirmDelete = /*#__PURE__*/_jsxDEV(Tooltip, {\n    title: \"Delete\",\n    enterDelay: 1200,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.deleteIcon,\n      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleClickOpen,\n        children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n        open: confirmOpen,\n        onClose: handleClose,\n        \"aria-labelledby\": \"alert-dialog-title\",\n        \"aria-describedby\": \"alert-dialog-description\",\n        children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n          id: \"alert-dialog-title\",\n          children: \"Are you sure you want to delete the post?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: handleClose,\n            color: \"primary\",\n            children: \"No\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: deletePostOrMutation,\n            color: \"primary\",\n            autoFocus: true,\n            children: \"Yes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: confirmDelete\n  }, void 0, false);\n}\n\n_s(DeleteButton, \"V+fX8otFsjvyFZmIZuigSe4dnCE=\", false, function () {\n  return [useStyles, useMutation];\n});\n\n_c = DeleteButton;\nconst DELETE_POST_MUTATION = gql`\n  mutation deletePost($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n`;\nconst DELETE_COMMENT_MUTATION = gql`\n  mutation deleteComment($postId: ID!, $commentId: ID!) {\n    deleteComment(postId: $postId, commentId: $commentId) {\n      id\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n      commentCount\n    }\n  }\n`;\n\nvar _c;\n\n$RefreshReg$(_c, \"DeleteButton\");","map":{"version":3,"sources":["/home/leighton/Documents/VScode/merngSocialSite/merng-client/src/components/DeleteButton.js"],"names":["React","useState","gql","useMutation","makeStyles","IconButton","DeleteIcon","Button","Dialog","DialogActions","Tooltip","DialogTitle","FETCH_POSTS_QUERY","useStyles","theme","deleteIcon","marginLeft","DeleteButton","postId","commentId","callback","classes","confirmOpen","setConfirmOpen","handleClickOpen","handleClose","mutation","DELETE_COMMENT_MUTATION","DELETE_POST_MUTATION","deletePostOrMutation","update","proxy","data","readQuery","query","writeQuery","getPosts","filter","p","id","variables","confirmDelete"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { gql, useMutation } from \"@apollo/client\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nimport { FETCH_POSTS_QUERY } from \"../utils/graphql\";\n\nconst useStyles = makeStyles((theme) => ({\n  deleteIcon: {\n    marginLeft: \"auto\",\n  },\n}));\n\nexport default function DeleteButton({ postId, commentId, callback }) {\n  const classes = useStyles();\n  const [confirmOpen, setConfirmOpen] = useState(false);\n\n  const handleClickOpen = () => {\n    setConfirmOpen(true);\n  };\n\n  const handleClose = () => {\n    setConfirmOpen(false);\n  };\n\n  const mutation = commentId ? DELETE_COMMENT_MUTATION : DELETE_POST_MUTATION;\n\n  const [deletePostOrMutation] = useMutation(mutation, {\n    update(proxy) {\n      setConfirmOpen(false);\n      if (!commentId) {\n        let data = proxy.readQuery({\n          query: FETCH_POSTS_QUERY,\n        });\n        // data = data.getPosts.filter((p) => p.id !== postId);\n        proxy.writeQuery({\n          query: FETCH_POSTS_QUERY,\n          data: {\n            getPosts: data.getPosts.filter((p) => p.id !== postId),\n          },\n        });\n      }\n      if (callback) callback();\n    },\n    variables: {\n      postId,\n      commentId,\n    },\n  });\n\n  const confirmDelete = (\n    <Tooltip title=\"Delete\" enterDelay={1200}>\n      <div className={classes.deleteIcon}>\n        <IconButton onClick={handleClickOpen}>\n          <DeleteIcon />\n        </IconButton>\n\n        <Dialog\n          open={confirmOpen}\n          onClose={handleClose}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <DialogTitle id=\"alert-dialog-title\">\n            {\"Are you sure you want to delete the post?\"}\n          </DialogTitle>\n          <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n              No\n            </Button>\n            <Button onClick={deletePostOrMutation} color=\"primary\" autoFocus>\n              Yes\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    </Tooltip>\n  );\n\n  return <>{confirmDelete}</>;\n}\n\nconst DELETE_POST_MUTATION = gql`\n  mutation deletePost($postId: ID!) {\n    deletePost(postId: $postId)\n  }\n`;\n\nconst DELETE_COMMENT_MUTATION = gql`\n  mutation deleteComment($postId: ID!, $commentId: ID!) {\n    deleteComment(postId: $postId, commentId: $commentId) {\n      id\n      comments {\n        id\n        username\n        createdAt\n        body\n      }\n      commentCount\n    }\n  }\n`;\n"]},"metadata":{},"sourceType":"module"}